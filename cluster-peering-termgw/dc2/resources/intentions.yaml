apiVersion: consul.hashicorp.com/v1alpha1
kind: ServiceIntentions
metadata:
  name: dc1-frontend-to-dc2-termgw
spec:
  destination:
    name: terminating-gateway
  sources:
    - name: frontend
      action: allow
      peer: dc1
    - name: backend
      action: allow
---
apiVersion: consul.hashicorp.com/v1alpha1
kind: ServiceIntentions
metadata:
  name: external
spec:
  destination:
    name: external
  sources:
    - name: frontend
      action: allow
      peer: dc1
    - name: backend
      action: allow
---
apiVersion: consul.hashicorp.com/v1alpha1
kind: ServiceIntentions
metadata:
  name: backend
spec:
  destination:
    name: backend
  sources:
    - name: frontend
      action: allow
      peer: dc1
---
apiVersion: consul.hashicorp.com/v1alpha1
kind: ServiceIntentions
metadata:
  name: web
spec:
  destination:
    name: web
  sources:
    - name: backend
      action: allow
    - name: frontend
      action: allow
      peer: dc1